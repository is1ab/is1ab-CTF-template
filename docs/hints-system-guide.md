# ğŸ’¡ é¡Œç›®æç¤ºç³»çµ±æŒ‡å—

æœ¬æŒ‡å—å°‡è©³ç´°ä»‹ç´¹ is1ab-CTF-template çš„å¤šéšæ®µé¡Œç›®æç¤ºç³»çµ±ï¼ŒåŒ…æ‹¬è¨­è¨ˆåŸç†ã€ä½¿ç”¨æ–¹æ³•å’Œæœ€ä½³å¯¦è¸ã€‚

## ğŸ“‹ ç³»çµ±æ¦‚è¦½

### è¨­è¨ˆåŸç†

é¡Œç›®æç¤ºç³»çµ±æ—¨åœ¨ï¼š
- **æ¼¸é€²å¼å¼•å°** - æä¾›åˆ†å±¤æ¬¡çš„è§£é¡Œå¹«åŠ©
- **å¹³è¡¡æŒ‘æˆ°æ€§** - ä¿æŒé¡Œç›®é›£åº¦çš„åŒæ™‚çµ¦äºˆé©ç•¶å¹«åŠ©
- **é¼“å‹µæ€è€ƒ** - å¼•å°åƒè³½è€…æ€è€ƒè€Œéç›´æ¥çµ¦å‡ºç­”æ¡ˆ
- **æˆæœ¬æ§åˆ¶** - é€éåˆ†æ•¸æ¶ˆè€—å¹³è¡¡æç¤ºä½¿ç”¨

### æç¤ºç­‰ç´šçµæ§‹

```
ğŸ’¡ æç¤º 1 (å…è²») - æ–¹å‘æ€§å¼•å°
    â†“
ğŸ’¡ æç¤º 2 (ä½æˆæœ¬) - æŠ€è¡“ç·šç´¢
    â†“  
ğŸ’¡ æç¤º 3 (é«˜æˆæœ¬) - å…·é«”æ­¥é©Ÿ
```

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. å‰µå»ºå¸¶æç¤ºçš„é¡Œç›®

```bash
# å‰µå»ºæ–°é¡Œç›®ï¼ˆè‡ªå‹•åŒ…å«é è¨­æç¤ºï¼‰
uv run scripts/create-challenge.py web sql_injection medium --author YourName

# æŸ¥çœ‹ç”Ÿæˆçš„æç¤ºé…ç½®
cat challenges/web/sql_injection/public.yml
```

ç”Ÿæˆçš„ `public.yml` æœƒåŒ…å«é è¨­æç¤ºçµæ§‹ï¼š

```yaml
hints:
  - level: 1
    cost: 0
    content: 'TODO: ç¬¬ä¸€å€‹å…è²»æç¤º - å¼•å°åƒè³½è€…æ€è€ƒæ–¹å‘'
  - level: 2
    cost: 10
    content: 'TODO: ç¬¬äºŒå€‹æç¤º - æä¾›å…·é«”çš„æŠ€è¡“ç·šç´¢'
  - level: 3
    cost: 25
    content: 'TODO: ç¬¬ä¸‰å€‹æç¤º - çµ¦å‡ºé—œéµæ­¥é©Ÿæˆ–å·¥å…·'
```

### 2. ä½¿ç”¨æç¤ºç®¡ç†å·¥å…·

```bash
# æŸ¥çœ‹é¡Œç›®ç¾æœ‰æç¤º
uv run scripts/manage-hints.py list web sql_injection

# æ–°å¢æç¤º
uv run scripts/manage-hints.py add web sql_injection \
  --level 1 --cost 0 \
  --content "æª¢æŸ¥ SQL æŸ¥è©¢çš„åƒæ•¸è™•ç†æ–¹å¼"

# æ›´æ–°æç¤º
uv run scripts/manage-hints.py update web sql_injection \
  --level 2 --cost 15 \
  --content "å˜—è©¦åœ¨ç™»å…¥è¡¨å–®ä¸­è¼¸å…¥ç‰¹æ®Šå­—ç¬¦"

# åˆªé™¤æç¤º
uv run scripts/manage-hints.py remove web sql_injection --level 3

# é©—è­‰æç¤ºé…ç½®
uv run scripts/manage-hints.py validate web sql_injection
```

### 3. ä½¿ç”¨ Web ä»‹é¢ç®¡ç†

1. å•Ÿå‹• Web ä»‹é¢ï¼š`cd web-interface && python server.py`
2. é–‹å•Ÿ http://localhost:8000
3. åœ¨é¡Œç›®çŸ©é™£ä¸­é»æ“Š ğŸ’¡ æŒ‰éˆ•
4. åœ¨å½ˆå‡ºçš„è¦–çª—ä¸­ç®¡ç†æç¤º

---

## ğŸ“ æç¤ºç·¨å¯«æŒ‡å—

### æç¤ºç­‰ç´šè¨­è¨ˆ

#### ğŸŒŸ ç­‰ç´š 1 - æ–¹å‘æ€§å¼•å° (å…è²»)
- **ç›®çš„**ï¼šå¹«åŠ©åƒè³½è€…ç†è§£é¡Œç›®é¡å‹å’Œæ”»æ“Šæ–¹å‘
- **å…§å®¹**ï¼šæ¦‚å¿µæ€§æç¤ºï¼Œä¸æä¾›å…·é«”æŠ€è¡“ç´°ç¯€
- **ç¯„ä¾‹**ï¼š
  ```
  âœ… "é€™å€‹ç™»å…¥ç³»çµ±å¯èƒ½å­˜åœ¨è¼¸å…¥é©—è­‰å•é¡Œ"
  âœ… "è©¦è‘—åˆ†æç¶²ç«™å¦‚ä½•è™•ç†ç”¨æˆ¶è¼¸å…¥"
  âŒ "ä½¿ç”¨ ' OR '1'='1' -- ä½œç‚ºå¯†ç¢¼"
  ```

#### â­ ç­‰ç´š 2 - æŠ€è¡“ç·šç´¢ (ä½æˆæœ¬ 5-20åˆ†)
- **ç›®çš„**ï¼šæä¾›æŠ€è¡“æ–¹å‘å’Œå·¥å…·å»ºè­°
- **å…§å®¹**ï¼šæŒ‡å‘å…·é«”æŠ€è¡“æˆ–å·¥å…·ï¼Œä½†ä¸çµ¦å‡ºå®Œæ•´è§£æ³•
- **ç¯„ä¾‹**ï¼š
  ```
  âœ… "è€ƒæ…® SQL æ³¨å…¥æ”»æ“Šï¼Œç‰¹åˆ¥æ³¨æ„ WHERE å­å¥"
  âœ… "ä½¿ç”¨ Burp Suite æ””æˆªè«‹æ±‚ä¸¦ä¿®æ”¹åƒæ•¸"
  âŒ "ç›´æ¥åŸ·è¡Œ sqlmap -u http://target --dump"
  ```

#### â­â­ ç­‰ç´š 3 - å…·é«”æ­¥é©Ÿ (é«˜æˆæœ¬ 20-50åˆ†)
- **ç›®çš„**ï¼šæä¾›è©³ç´°çš„æ“ä½œæ­¥é©Ÿæˆ–é—œéµ payload
- **å…§å®¹**ï¼šå…·é«”çš„æŠ€è¡“æ­¥é©Ÿï¼Œä½†ä»éœ€è¦åƒè³½è€…ç†è§£å’ŒåŸ·è¡Œ
- **ç¯„ä¾‹**ï¼š
  ```
  âœ… "åœ¨ username æ¬„ä½è¼¸å…¥ï¼šadmin' OR '1'='1' --"
  âœ… "ä½¿ç”¨ UNION SELECT æŸ¥è©¢ä¾†ç²å–è³‡æ–™åº«çµæ§‹"
  ```

### ä¸åŒé›£åº¦çš„æç¤ºç­–ç•¥

#### ğŸ¼ Baby é›£åº¦
```yaml
hints:
  - level: 1
    cost: 0
    content: "é€™æ˜¯ä¸€å€‹é©åˆæ–°æ‰‹çš„é¡Œç›®ï¼Œå¾æª¢æŸ¥ç¶²é åŸå§‹ç¢¼é–‹å§‹å§ï¼"
  - level: 2
    cost: 5
    content: "è©¦è‘—æŸ¥çœ‹ç¶²é çš„åŸå§‹ç¢¼æˆ–æª¢æŸ¥é–‹ç™¼è€…å·¥å…·"
  - level: 3
    cost: 10
    content: "Flag å¯èƒ½éš±è—åœ¨ HTML è¨»è§£æˆ– JavaScript ä¸­"
```

#### â­ Easy é›£åº¦
```yaml
hints:
  - level: 1
    cost: 0
    content: "ä»”ç´°è§€å¯Ÿé¡Œç›®çš„åŠŸèƒ½å’Œè¼¸å…¥é»"
  - level: 2
    cost: 10
    content: "è©¦è‘—æ¸¬è©¦ä¸åŒçš„è¼¸å…¥ï¼Œçœ‹çœ‹æœ‰ä»€éº¼ç•°å¸¸å›æ‡‰"
  - level: 3
    cost: 20
    content: "è€ƒæ…®å¸¸è¦‹çš„ Web å®‰å…¨æ¼æ´ï¼Œå¦‚ SQL æ³¨å…¥æˆ– XSS"
```

#### â­â­ Medium é›£åº¦
```yaml
hints:
  - level: 1
    cost: 0
    content: "é€™é¡Œéœ€è¦å°å®‰å…¨æ¦‚å¿µæœ‰åŸºæœ¬ç†è§£"
  - level: 2
    cost: 15
    content: "åˆ†ææ‡‰ç”¨ç¨‹å¼çš„é‚è¼¯ï¼Œæ‰¾å‡ºå¯èƒ½çš„æ”»æ“Šé»"
  - level: 3
    cost: 30
    content: "å¯èƒ½éœ€è¦çµ„åˆå¤šç¨®æŠ€è¡“æˆ–ç¹éæŸäº›é˜²è­·æ©Ÿåˆ¶"
```

---

## ğŸ”§ é€²éšåŠŸèƒ½

### åˆå§‹åŒ–é è¨­æç¤º

æ ¹æ“šé¡Œç›®é›£åº¦è‡ªå‹•åˆå§‹åŒ–åˆé©çš„æç¤ºï¼š

```bash
# ç‚º baby é›£åº¦é¡Œç›®åˆå§‹åŒ–é è¨­æç¤º
uv run scripts/manage-hints.py init web welcome --difficulty baby

# ç‚º hard é›£åº¦é¡Œç›®åˆå§‹åŒ–é è¨­æç¤º  
uv run scripts/manage-hints.py init crypto rsa_attack --difficulty hard
```

### æ‰¹é‡ç®¡ç†æç¤º

```bash
# ç‚ºæ‰€æœ‰ web åˆ†é¡é¡Œç›®é©—è­‰æç¤º
find challenges/web -name "public.yml" -execdir uv run ../../../scripts/manage-hints.py validate web $(basename $(pwd)) \;

# åŒ¯å‡ºæ‰€æœ‰æç¤ºåˆ° JSON
uv run scripts/export-hints.py --format json --output hints-backup.json
```

### Web API é›†æˆ

æç¤ºç³»çµ±æä¾›å®Œæ•´çš„ RESTful APIï¼š

```javascript
// ç²å–é¡Œç›®æç¤º
GET /api/challenges/{category}/{name}/hints

// æ–°å¢æç¤º
POST /api/challenges/{category}/{name}/hints
{
  "level": 1,
  "cost": 0,
  "content": "æç¤ºå…§å®¹"
}

// æ›´æ–°æç¤º
PUT /api/challenges/{category}/{name}/hints/{level}
{
  "cost": 15,
  "content": "æ›´æ–°çš„æç¤ºå…§å®¹"
}

// åˆªé™¤æç¤º
DELETE /api/challenges/{category}/{name}/hints/{level}
```

---

## ğŸ¯ æœ€ä½³å¯¦è¸

### 1. æç¤ºè¨­è¨ˆåŸå‰‡

#### âœ… å¥½çš„æç¤º
- **æ¼¸é€²å¼æ­ç¤º**ï¼šå¾æ¦‚å¿µåˆ°å…·é«”é€æ­¥æ·±å…¥
- **æ•™è‚²å°å‘**ï¼šå¹«åŠ©ç†è§£è€Œéç›´æ¥çµ¦ç­”æ¡ˆ
- **æŠ€è¡“æº–ç¢º**ï¼šç¢ºä¿æŠ€è¡“è³‡è¨Šæ­£ç¢ºç„¡èª¤
- **é©ç•¶é›£åº¦**ï¼šç¬¦åˆç›®æ¨™å—çœ¾çš„æŠ€èƒ½æ°´å¹³

#### âŒ é¿å…çš„åšæ³•
- **ç›´æ¥æ´©éœ²**ï¼šä¸è¦ç›´æ¥çµ¦å‡º Flag æˆ–å®Œæ•´è§£æ³•
- **èª¤å°è³‡è¨Š**ï¼šé¿å…æä¾›éŒ¯èª¤æˆ–éæ™‚çš„æŠ€è¡“è³‡è¨Š
- **è·³èºå¤ªå¤§**ï¼šæç¤ºä¹‹é–“çš„é›£åº¦å·®è·ä¸è¦å¤ªå¤§
- **éæ–¼ç± çµ±**ï¼šé¿å…æ²’æœ‰å¯¦éš›å¹«åŠ©çš„ç©ºæ³›æç¤º

### 2. æˆæœ¬è¨­å®šå»ºè­°

| æç¤ºç­‰ç´š | å»ºè­°æˆæœ¬ | é©ç”¨æƒ…æ³ |
|----------|----------|----------|
| ç­‰ç´š 1 | 0 åˆ† | æ–¹å‘æ€§å¼•å°ï¼Œæ‰€æœ‰é¡Œç›® |
| ç­‰ç´š 2 | 5-20 åˆ† | æŠ€è¡“ç·šç´¢ï¼Œæ ¹æ“šé›£åº¦èª¿æ•´ |
| ç­‰ç´š 3 | 20-50 åˆ† | å…·é«”æ­¥é©Ÿï¼Œé«˜é›£åº¦é¡Œç›® |
| ç­‰ç´š 4+ | 50+ åˆ† | é—œéµ payloadï¼Œæ¥µé™æŒ‘æˆ° |

### 3. å…§å®¹æ’°å¯«æŠ€å·§

#### ğŸ¨ ä½¿ç”¨è¡¨æƒ…ç¬¦è™Ÿå¢å¼·å¯è®€æ€§
```yaml
content: "ğŸ” æª¢æŸ¥ç¶²é åŸå§‹ç¢¼ï¼Œç‰¹åˆ¥æ³¨æ„ JavaScript éƒ¨åˆ†"
content: "ğŸ› ï¸ è©¦è©¦ä½¿ç”¨ Burp Suite æ””æˆªå’Œä¿®æ”¹è«‹æ±‚"
content: "ğŸ’¡ è€ƒæ…®ä½¿ç”¨ sqlmap é€²è¡Œè‡ªå‹•åŒ–æ³¨å…¥æ¸¬è©¦"
```

#### ğŸ“š æä¾›å­¸ç¿’è³‡æº
```yaml
content: "é€™é¡Œæ¶‰åŠ SQL æ³¨å…¥ï¼Œå»ºè­°å…ˆäº†è§£ OWASP Top 10 ä¸­çš„ç›¸é—œå…§å®¹"
content: "éœ€è¦ç”¨åˆ° Union-based SQL æ³¨å…¥æŠ€è¡“ï¼Œå¯åƒè€ƒ PortSwigger çš„æ•™å­¸"
```

#### ğŸ”— åˆ†æ­¥é©ŸæŒ‡å°
```yaml
content: |
  æŒ‰ç…§ä»¥ä¸‹æ­¥é©Ÿé€²è¡Œï¼š
  1. æ””æˆªç™»å…¥è«‹æ±‚
  2. ä¿®æ”¹ username åƒæ•¸
  3. è§€å¯Ÿå›æ‡‰çš„è®ŠåŒ–
  4. æ§‹é€ é©ç•¶çš„ payload
```

---

## ğŸ“Š ç›£æ§å’Œåˆ†æ

### æç¤ºä½¿ç”¨çµ±è¨ˆ

```bash
# åˆ†ææç¤ºä½¿ç”¨æƒ…æ³ï¼ˆéœ€è¦åœ¨æ¯”è³½å¹³å°å¯¦ç¾ï¼‰
uv run scripts/analyze-hints.py --competition 2024-is1ab-CTF

# ç”Ÿæˆæç¤ºæ•ˆæœå ±å‘Š
uv run scripts/hint-report.py --output hints-analysis.html
```

### å“è³ªè©•ä¼°æŒ‡æ¨™

- **è§£é¡ŒæˆåŠŸç‡**ï¼šä½¿ç”¨æç¤ºå¾Œçš„è§£é¡ŒæˆåŠŸç‡è®ŠåŒ–
- **æç¤ºé †åº**ï¼šåƒè³½è€…ä½¿ç”¨æç¤ºçš„é †åºæ¨¡å¼
- **æˆæœ¬æ•ˆç›Š**ï¼šä¸åŒæˆæœ¬æç¤ºçš„ä½¿ç”¨é »ç‡
- **æ»¿æ„åº¦èª¿æŸ¥**ï¼šæ”¶é›†åƒè³½è€…å°æç¤ºå“è³ªçš„å›é¥‹

---

## ğŸš¨ å¸¸è¦‹å•é¡Œ

### Q: å¦‚ä½•ç‚ºå·²å­˜åœ¨çš„é¡Œç›®æ·»åŠ æç¤ºï¼Ÿ

```bash
# æ–¹æ³•ä¸€ï¼šä½¿ç”¨ç®¡ç†è…³æœ¬
uv run scripts/manage-hints.py add web existing_challenge \
  --level 1 --cost 0 --content "æ–°çš„æç¤ºå…§å®¹"

# æ–¹æ³•äºŒï¼šç›´æ¥ç·¨è¼¯ public.yml
# æ‰‹å‹•åœ¨ hints é™£åˆ—ä¸­æ·»åŠ æ–°çš„æç¤ºé …ç›®
```

### Q: æç¤ºå…§å®¹å¯ä»¥åŒ…å«ç¨‹å¼ç¢¼å—ï¼Ÿ

å¯ä»¥ï¼Œä½†å»ºè­°éµå¾ªä»¥ä¸‹æ ¼å¼ï¼š

```yaml
content: |
  ä½¿ç”¨ä»¥ä¸‹ payload é€²è¡Œæ¸¬è©¦ï¼š
  ```
  ' OR '1'='1' --
  ```
  è¨˜å¾—è§€å¯Ÿä¼ºæœå™¨çš„å›æ‡‰è®ŠåŒ–
```

### Q: å¦‚ä½•è™•ç†æç¤ºä¸­çš„ç‰¹æ®Šå­—ç¬¦ï¼Ÿ

åœ¨ YAML ä¸­ä½¿ç”¨é©ç•¶çš„å¼•è™Ÿå’Œè½‰ç¾©ï¼š

```yaml
content: "ä½¿ç”¨ payloadï¼š' OR \"1\"=\"1\" --"
content: |
  å¤šè¡Œæç¤ºå¯ä»¥åŒ…å«ï¼š
  - ç‰¹æ®Šå­—ç¬¦ ' " \ 
  - ç¨‹å¼ç¢¼ç‰‡æ®µ
  - æ ¼å¼åŒ–å…§å®¹
```

### Q: å¯ä»¥ç‚ºä¸åŒåˆ†é¡è¨­å®šä¸åŒçš„é è¨­æç¤ºå—ï¼Ÿ

å¯ä»¥ä¿®æ”¹ `scripts/manage-hints.py` ä¸­çš„ `init_default_hints` å‡½æ•¸ï¼š

```python
def init_default_hints(self, category, name, difficulty):
    if category == 'crypto':
        # å¯†ç¢¼å­¸é¡Œç›®çš„ç‰¹æ®Šæç¤ºæ¨¡æ¿
        default_hints = [...]
    elif category == 'pwn':
        # PWN é¡Œç›®çš„ç‰¹æ®Šæç¤ºæ¨¡æ¿  
        default_hints = [...]
    # ...
```

---

## ğŸ”— æ•´åˆèˆ‡æ“´å±•

### CTF å¹³å°æ•´åˆ

æç¤ºç³»çµ±å¯ä»¥èˆ‡ä¸»æµ CTF å¹³å°æ•´åˆï¼š

#### GZCTF æ•´åˆ
```python
# åœ¨ sync-to-gzctf.py ä¸­æ·»åŠ æç¤ºåŒæ­¥
def sync_hints_to_gzctf(challenge_data):
    hints = challenge_data.get('hints', [])
    for hint in hints:
        gzctf_api.create_hint(
            challenge_id=challenge_id,
            content=hint['content'],
            cost=hint['cost']
        )
```

#### CTFd æ•´åˆ
```python
# åœ¨ sync-to-ctfd.py ä¸­æ·»åŠ æç¤ºåŒæ­¥
def sync_hints_to_ctfd(challenge_data):
    hints = challenge_data.get('hints', [])
    for hint in hints:
        ctfd_api.create_hint(
            challenge_id=challenge_id,
            content=hint['content'],
            cost=hint['cost']
        )
```

### è‡ªå®šç¾©æç¤ºé¡å‹

æ“´å±•æç¤ºç³»çµ±æ”¯æ´æ›´å¤šé¡å‹ï¼š

```yaml
hints:
  - level: 1
    cost: 0
    type: "text"
    content: "æ–‡å­—æç¤º"
  - level: 2
    cost: 10
    type: "code"
    language: "python"
    content: |
      # ç¯„ä¾‹ç¨‹å¼ç¢¼
      import requests
      response = requests.get(url)
  - level: 3
    cost: 20
    type: "file"
    filename: "hint.py"
    content: "..."
```

---

**ğŸ¯ é€éé€™å€‹å®Œå–„çš„æç¤ºç³»çµ±ï¼Œæ‚¨å¯ä»¥ç‚ºåƒè³½è€…æä¾›æ›´å¥½çš„å­¸ç¿’é«”é©—ï¼ŒåŒæ™‚ä¿æŒé©ç•¶çš„æŒ‘æˆ°æ€§ï¼**

---

*æœ€å¾Œæ›´æ–°ï¼š2025-08-03*